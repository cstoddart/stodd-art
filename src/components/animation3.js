import React, { useState } from 'react';
import { motion } from 'framer-motion';
import { LeftArrow } from './ui/leftArrow';
import { RightArrow } from './ui/rightArrow';
import { useShortcut } from '../hooks/useShortcut';
import { Footer } from './ui/footer';

const pathData = {
  arrow: 'M 105.66 0.54 C 105.966 0.246 106.375 0.081 106.8 0.08 L 109.09 0.08 C 109.367 0.078 109.64 0.15 109.881 0.287 C 110.122 0.424 110.323 0.622 110.463 0.861 C 110.604 1.101 110.678 1.373 110.68 1.65 C 110.675 1.964 110.577 2.27 110.4 2.53 L 96.64 21.93 L 105.64 30.71 L 99.64 22.42 C 99.542 22.284 99.496 22.117 99.511 21.95 C 99.526 21.783 99.6 21.627 99.72 21.51 L 120.8 0.55 C 120.946 0.398 121.122 0.278 121.316 0.197 C 121.51 0.116 121.719 0.076 121.93 0.08 L 124.22 0.08 C 124.497 0.078 124.77 0.15 125.011 0.287 C 125.252 0.424 125.453 0.622 125.593 0.861 C 125.734 1.101 125.808 1.373 125.81 1.65 C 125.812 1.966 125.714 2.274 125.53 2.53 L 111.81 21.93 L 120.81 30.71 L 114.81 22.42 C 114.709 22.286 114.66 22.119 114.673 21.952 C 114.686 21.784 114.76 21.627 114.88 21.51 L 136 0.55 C 136.147 0.4 136.323 0.281 136.517 0.2 C 136.711 0.12 136.92 0.079 137.13 0.08 L 139.43 0.08 C 139.719 0.08 140.003 0.158 140.251 0.305 C 140.499 0.453 140.703 0.666 140.84 0.92 C 140.972 1.172 141.032 1.456 141.013 1.741 C 140.993 2.025 140.895 2.298 140.73 2.53 L 127 21.93 L 136 30.71 L 130 22.42 C 129.9 22.285 129.853 22.117 129.868 21.95 C 129.883 21.782 129.958 21.626 130.08 21.51 L 151.14 0.51 C 151.29 0.361 151.468 0.242 151.663 0.162 C 151.859 0.081 152.068 0.04 152.28 0.04 L 154.57 0.04 C 154.847 0.038 155.12 0.11 155.361 0.247 C 155.602 0.384 155.803 0.582 155.943 0.821 C 156.084 1.061 156.158 1.333 156.16 1.61 C 156.16 1.925 156.062 2.233 155.88 2.49 L 142.16 21.89 L 151.77 31.21 L 145.77 22.56 C 145.696 22.456 145.652 22.334 145.642 22.206 C 145.633 22.079 145.658 21.951 145.716 21.837 C 145.774 21.724 145.862 21.628 145.97 21.56 C 146.086 21.485 146.221 21.443 146.36 21.44 L 149.23 21.44 C 149.346 21.441 149.46 21.47 149.562 21.524 C 149.665 21.578 149.753 21.655 149.82 21.75 C 154.447 28.363 159.073 34.977 163.7 41.59 C 163.857 41.817 163.95 42.082 163.97 42.357 C 163.99 42.632 163.935 42.907 163.812 43.154 C 163.689 43.401 163.502 43.61 163.27 43.76 C 163.009 43.933 162.703 44.026 162.39 44.03 C 161.65 44.03 160.91 44.03 160.17 44.03 C 159.751 44.029 159.349 43.864 159.05 43.57 L 137.63 22.46 C 137.51 22.343 137.436 22.186 137.423 22.018 C 137.41 21.851 137.459 21.684 137.56 21.55 L 143.56 13.14 L 134.56 22 L 148.5 41.58 C 148.664 41.814 148.761 42.089 148.781 42.375 C 148.8 42.66 148.741 42.946 148.61 43.2 C 148.472 43.456 148.267 43.669 148.017 43.817 C 147.766 43.965 147.481 44.042 147.19 44.04 L 145 44.04 C 144.578 44.038 144.173 43.873 143.87 43.58 L 122.48 22.46 C 122.363 22.344 122.29 22.189 122.275 22.025 C 122.261 21.86 122.305 21.695 122.4 21.56 L 128.47 13.14 L 119.39 22 L 133.39 41.58 C 133.549 41.805 133.645 42.069 133.669 42.344 C 133.692 42.619 133.641 42.896 133.522 43.144 C 133.403 43.393 133.219 43.606 132.99 43.76 C 132.695 43.946 132.347 44.03 132 44 L 129.81 44 C 129.388 44 128.982 43.835 128.68 43.54 L 107.28 22.42 C 107.162 22.303 107.09 22.148 107.077 21.983 C 107.065 21.818 107.112 21.653 107.21 21.52 L 113.21 13.11 L 104.21 21.97 L 118.15 41.55 C 118.31 41.775 118.407 42.038 118.431 42.312 C 118.456 42.587 118.406 42.863 118.288 43.112 C 118.17 43.362 117.988 43.575 117.76 43.73 C 117.491 43.911 117.174 44.008 116.85 44.01 L 114.65 44.01 C 114.231 44.009 113.829 43.844 113.53 43.55 L 92.15 22.46 C 92.031 22.345 91.957 22.19 91.942 22.025 C 91.928 21.86 91.973 21.695 92.07 21.56 L 98.07 13.18 L 87.47 23.69 C 87.17 23.981 86.768 24.143 86.35 24.14 L 35 24.14 C 34.848 24.137 34.701 24.195 34.59 24.299 C 34.48 24.404 34.415 24.548 34.41 24.7 L 34.41 40.34 C 34.407 40.617 34.33 40.889 34.188 41.127 C 34.047 41.366 33.845 41.563 33.603 41.698 C 33.361 41.834 33.087 41.904 32.81 41.9 C 32.526 41.897 32.247 41.821 32 41.68 L 0.76 23.43 C 0.522 23.291 0.325 23.091 0.189 22.851 C 0.053 22.61 -0.016 22.338 -0.013 22.062 C -0.009 21.787 0.068 21.517 0.21 21.28 C 0.351 21.062 0.539 20.877 0.76 20.74 L 26.5 5.7 C 26.751 5.561 27.033 5.488 27.32 5.49 C 27.596 5.488 27.867 5.559 28.106 5.695 C 28.346 5.832 28.545 6.029 28.685 6.266 C 28.824 6.504 28.898 6.774 28.9 7.05 L 28.9 30.69 C 28.897 30.967 28.82 31.239 28.678 31.477 C 28.537 31.716 28.335 31.913 28.093 32.048 C 27.851 32.184 27.577 32.254 27.3 32.25 C 27.012 32.248 26.73 32.172 26.48 32.03 L 11.8 23.43 C 11.56 23.296 11.361 23.099 11.223 22.862 C 11.085 22.625 11.012 22.355 11.014 22.08 C 11.015 21.805 11.09 21.536 11.23 21.3 C 11.37 21.068 11.566 20.876 11.8 20.74 L 21 15.4 C 21.246 15.256 21.525 15.18 21.81 15.18 C 22.087 15.178 22.36 15.25 22.601 15.387 C 22.842 15.524 23.043 15.722 23.183 15.961 C 23.324 16.201 23.398 16.473 23.4 16.75 C 23.4 16.993 23.4 17.237 23.4 17.48 C 23.39 17.741 23.314 17.995 23.179 18.219 C 23.045 18.443 22.856 18.629 22.63 18.76 C 20.793 19.84 18.957 20.92 17.12 22 C 17.099 22.012 17.081 22.03 17.069 22.051 C 17.057 22.072 17.05 22.096 17.05 22.12 C 17.057 22.17 17.082 22.217 17.12 22.25 L 24.89 26.78 L 25 26.78 C 25.11 26.78 25.17 26.73 25.17 26.64 L 25.17 11.18 C 25.177 11.148 25.173 11.115 25.16 11.085 C 25.146 11.056 25.123 11.031 25.094 11.016 C 25.065 11 25.032 10.995 25 11 L 6.22 22 C 6.198 22.014 6.18 22.033 6.168 22.056 C 6.156 22.079 6.149 22.104 6.15 22.13 C 6.151 22.156 6.158 22.18 6.17 22.203 C 6.182 22.226 6.199 22.245 6.22 22.26 L 30.45 36.38 L 30.51 36.38 C 30.61 36.38 30.68 36.38 30.68 36.24 L 30.68 22 C 30.685 21.583 30.856 21.184 31.153 20.892 C 31.451 20.6 31.853 20.437 32.27 20.44 L 85.19 20.44 C 85.344 20.44 85.491 20.379 85.6 20.27', 
  arrowPressed: 'M 105.66 16.13 C 106.033 16.04 106.416 15.996 106.8 16 L 107.563 16 C 107.818 16 108.072 16 108.327 16 C 108.581 16 108.836 16 109.09 16 C 109.97 16 110.68 16.2 110.68 16.44 C 110.68 16.52 110.58 16.61 110.4 16.68 L 96.64 22 L 105.64 24.42 L 102.64 23.275 C 101.64 22.893 100.64 22.512 99.64 22.13 C 99.44 22.05 99.47 21.95 99.72 21.88 L 120.79 16.09 C 121.16 15.999 121.539 15.955 121.92 15.96 C 122.111 15.96 122.302 15.96 122.493 15.96 L 123.065 15.96 C 123.256 15.96 123.447 15.96 123.638 15.96 C 123.828 15.96 124.019 15.96 124.21 15.96 C 125.09 15.96 125.8 16.15 125.8 16.39 C 125.8 16.63 125.71 16.57 125.52 16.64 L 111.81 22 L 120.81 24.42 L 117.81 23.275 C 116.81 22.893 115.81 22.512 114.81 22.13 C 114.6 22.06 114.63 21.95 114.88 21.88 L 136 16.13 C 136.37 16.039 136.749 15.995 137.13 16 C 137.322 16 137.513 16 137.705 16 L 138.28 16 C 138.472 16 138.663 16 138.855 16 C 139.047 16 139.238 16 139.43 16 C 139.911 15.981 140.39 16.059 140.84 16.23 C 141.11 16.37 141.07 16.55 140.73 16.68 L 127 22 L 136 24.42 L 133 23.275 C 132 22.893 131 22.512 130 22.13 C 129.79 22.05 129.83 21.95 130.08 21.88 L 151.14 16.09 C 151.513 16 151.896 15.956 152.28 15.96 C 152.471 15.96 152.662 15.96 152.852 15.96 L 153.425 15.96 C 153.616 15.96 153.807 15.96 153.998 15.96 C 154.188 15.96 154.379 15.96 154.57 15.96 C 155.46 15.96 156.16 16.16 156.16 16.4 C 156.16 16.48 156.06 16.57 155.88 16.64 L 142.14 22 L 146.945 23.285 L 151.75 24.57 C 150.75 24.172 149.75 23.773 148.75 23.375 C 147.75 22.977 146.75 22.578 145.75 22.18 C 145.53 22.09 145.61 21.97 145.95 21.91 C 146.08 21.899 146.21 21.899 146.34 21.91 L 149.21 21.91 C 149.41 21.905 149.609 21.932 149.8 21.99 C 154.427 23.817 159.053 25.643 163.68 27.47 C 164.18 27.67 163.98 27.94 163.25 28.07 C 162.96 28.124 162.665 28.151 162.37 28.15 C 161.63 28.15 160.89 28.15 160.15 28.15 C 160.056 28.151 159.961 28.149 159.867 28.144 C 159.773 28.139 159.679 28.131 159.586 28.12 C 159.492 28.11 159.399 28.096 159.307 28.079 C 159.214 28.062 159.122 28.043 159.03 28.02 L 137.6 22.17 C 137.35 22.11 137.32 22 137.53 21.92 C 139.53 21.147 141.53 20.373 143.53 19.6 L 139.03 20.825 L 134.53 22.05 L 148.48 27.46 C 148.81 27.59 148.86 27.76 148.59 27.9 C 148.139 28.08 147.655 28.162 147.17 28.14 C 146.929 28.14 146.688 28.14 146.447 28.14 C 146.206 28.14 145.964 28.14 145.723 28.14 L 145 28.14 C 144.619 28.143 144.24 28.1 143.87 28.01 L 122.48 22.17 C 122.24 22.11 122.2 22 122.4 21.93 C 124.423 21.153 126.447 20.377 128.47 19.6 L 123.93 20.825 L 119.39 22.05 L 133.39 27.46 C 133.89 27.65 133.72 27.92 132.99 28.06 C 132.69 28.114 132.385 28.141 132.08 28.14 C 131.837 28.14 131.593 28.14 131.35 28.14 C 131.107 28.14 130.863 28.14 130.62 28.14 L 129.89 28.14 C 129.509 28.144 129.13 28.1 128.76 28.01 L 107.36 22.17 C 107.11 22.11 107.09 22 107.29 21.93 C 109.29 21.153 111.29 20.377 113.29 19.6 L 108.79 20.825 L 104.29 22.05 L 118.23 27.46 C 118.73 27.65 118.56 27.92 117.84 28.06 C 117.54 28.114 117.235 28.14 116.93 28.14 C 116.686 28.14 116.441 28.14 116.197 28.14 C 115.952 28.14 115.708 28.14 115.463 28.14 L 114.73 28.14 C 114.353 28.144 113.976 28.1 113.61 28.01 L 92.21 22.16 C 91.96 22.1 91.93 21.99 92.13 21.92 C 94.13 21.147 96.13 20.373 98.13 19.6 L 92.82 21.05 L 87.51 22.5 C 87.144 22.59 86.767 22.634 86.39 22.63 L 35 22.63 C 34.68 22.63 34.41 22.7 34.41 22.78 C 34.41 22.78 34.41 22.78 34.41 22.78 L 34.41 27.09 C 34.41 27.33 33.69 27.53 32.81 27.53 C 32.717 27.53 32.623 27.53 32.531 27.528 C 32.439 27.526 32.348 27.521 32.259 27.512 C 32.17 27.503 32.083 27.49 32 27.47 L 21.587 25.797 C 18.116 25.239 14.644 24.681 11.173 24.123 C 7.702 23.566 4.231 23.008 0.76 22.45 C 0.01 22.33 -0.24 22.06 0.21 21.86 C 0.387 21.791 0.572 21.74 0.76 21.71 L 26.5 17.55 C 26.59 17.536 26.681 17.525 26.772 17.516 C 26.863 17.507 26.954 17.5 27.046 17.496 C 27.137 17.491 27.229 17.49 27.32 17.49 C 28.19 17.49 28.9 17.69 28.9 17.93 L 28.9 24.46 C 28.9 24.7 28.18 24.89 27.3 24.89 C 27.3 24.89 27.3 24.89 27.3 24.89 C 27.163 24.891 27.026 24.886 26.889 24.876 C 26.752 24.866 26.616 24.851 26.48 24.83 L 21.587 24.037 C 19.956 23.772 18.324 23.508 16.693 23.243 C 15.062 22.979 13.431 22.714 11.8 22.45 C 11.04 22.33 10.8 22.07 11.23 21.86 C 11.414 21.788 11.605 21.738 11.8 21.71 L 14.1 21.34 C 14.867 21.217 15.633 21.093 16.4 20.97 C 17.167 20.847 17.933 20.723 18.7 20.6 C 19.467 20.477 20.233 20.353 21 20.23 C 21.268 20.188 21.539 20.168 21.81 20.17 C 22.69 20.17 23.4 20.37 23.4 20.61 C 23.4 20.61 23.4 20.61 23.4 20.61 C 23.4 20.673 23.4 20.737 23.4 20.8 C 23.4 20.94 23.09 21.08 22.63 21.15 C 20.793 21.433 18.957 21.717 17.12 22 C 17.097 22 17.073 22 17.05 22 C 17.073 22 17.097 22 17.12 22 L 24.89 23.25 L 25 23.25 C 25.11 23.25 25.17 23.25 25.17 23.25 L 25.17 19.07 C 25.17 19.07 25.1 19.07 25.02 19.07 C 25.02 19.07 25.02 19.07 25.02 19.07 C 23.457 19.32 21.895 19.57 20.332 19.82 L 15.645 20.57 C 14.082 20.82 12.52 21.07 10.957 21.32 C 9.395 21.57 7.832 21.82 6.27 22.07 C 6.247 22.07 6.223 22.07 6.2 22.07 C 6.223 22.07 6.247 22.07 6.27 22.07 L 30.45 26 L 30.51 26 C 30.61 26 30.68 26 30.68 26 L 30.68 22.05 C 30.68 21.93 30.858 21.823 31.145 21.745 C 31.433 21.668 31.83 21.62 32.27 21.62 L 85.19 21.62 C 85.328 21.621 85.466 21.604 85.6 21.57',
};

const variants = {
  pressed: {
    d: pathData.arrowPressed,
  },
  launched: {
    d: pathData.arrow,
    translateX: [0, '-100vw', '-100vw', 0, 0],
    opacity: [1, 1, 0, 0, 1],
    times: [0, 0.5, 0.6, 0.75, 1],
    transition: {
      duration: 1,
    },
    transitionEnd: {
      translateX: 0,
      opacity: 1,
    },
  },
  exit: {
    rotate: 1080,
    opacity: 0,
  },
};

export const Animation3 = () => {
  const [arrowPressed, setArrowPressed] = useState(false);
  const [arrowLaunched, setArrowLaunched] = useState(false);

  const squashArrow = () => {
    setArrowPressed(true);
    setArrowLaunched(false);
  }

  const launchArrow = () => {
    setArrowPressed(false);
    setArrowLaunched(true);
  }

  useShortcut({
    eventType: 'keydown',
    eventHandler: squashArrow,
    triggerKey: 'Space',
  });

  useShortcut({
    eventType: 'keyup',
    eventHandler: launchArrow,
    triggerKey: 'Space',
  });

  return (
    <>
      <LeftArrow to="/2" />
      <motion.svg
        width="250px"
        viewBox="0 0 164 44"
        animate={arrowLaunched ? 'launched' : arrowPressed ? 'pressed' : false}
        exit="exit"
        onMouseDown={squashArrow}
        onMouseUp={launchArrow}
        style={{
          overflow: 'visible',
          filter: 'drop-shadow(2px 2px 5px black)',
          cursor: 'pointer'
        }}
      >
        <motion.path
          fill="#1d1"
          d={pathData.arrow}
          initial={{ opacity: 1, translateX: 0 }}
          variants={variants}
        />
      </motion.svg>
      <RightArrow to="/1" />
      <Footer />
    </>
  );
};